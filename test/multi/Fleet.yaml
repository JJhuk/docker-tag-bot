apiVersion: agones.dev/v1
kind: Fleet
metadata:
  name: fleet
  namespace: multi
spec:
  replicas: 5
  scheduling: Packed
  strategy:
    type: RollingUpdate
    rollingUpdate:
      maxSurge: 25%
      maxUnavailable: 25%
  template:
    spec:
      ports:
        - name: grpc
          portPolicy: Dynamic
          containerPort: 10300
          protocol: TCP
        - name: http
          portPolicy: Dynamic
          containerPort: 80
          protocol: TCP
      health:
        initialDelaySeconds: 30
        periodSeconds: 60
      sdkServer:
        logLevel: Info
        grpcPort: 9357
        httpPort: 9358
      players:
        initialCapacity: 50
      template:
        spec:
          containers:
            - name: app
              image: >-
                677979501910.dkr.ecr.ap-northeast-2.amazonaws.com/nk-backend/multi:main-b70915a
              volumeMounts:
                - mountPath: /app/appsettings.json
                  name: configmap
                  readOnly: true
                  subPath: appsettings.json
